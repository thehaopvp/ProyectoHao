<div class="container">
  <form
    action="#"
    #RegiForm="ngForm"
    id="form-register"
    class="mt-4"
    method="POST"
    (ngSubmit)="regisUser()"
    role="form"
  >
    <legend>Crea una cuenta</legend>

    <div class="mb-3">
      <label for="nombre">Nombre:</label>
      <input
        type="text"
        [(ngModel)]="regiUser.nombre"
        #nameModel="ngModel"
        class="form-control"
        id="nombre"
        name="nombreUser"
        placeholder="Nombre"
        [ngClass]="validClasses(nameModel, 'is-valid', 'is-invalid')"
        required
      />
      <div class="invalid-feedback">Se requiere nombre</div>
    </div>
    <div class="mb-3">
      <label for="imagen">Imagen:</label>
      <input
        (change)="capturarFile($event)"
        required
        [(ngModel)]="regiUser.imagen"
        #imagenModel="ngModel"
        [ngClass]="validClasses(imagenModel, 'is-valid', 'is-invalid')"
        type="file"
        required
        class="form-control"
        id="imagen"
        name="imagen"
      />
      <div class="invalid-feedback">Imagen Falla</div>
      <div class="valid-feedback">Imagen guardada</div>
    </div>
    <div *ngIf="previsualizacion">
      <img [src]="previsualizacion" width="400px" />
    </div>
    <div class="mb-3">
      <label for="password">Contrase単a:</label>
      <input
        type="password"
        required
        [(ngModel)]="regiUser.password"
        #passwordModel="ngModel"
        [ngClass]="validClasses(passwordModel, 'is-valid', 'is-invalid')"
        class="form-control"
        id="password"
        name="password"
        placeholder="Password"
      />
      <div class="invalid-feedback">Se requiere Contrase単a</div>
    </div>
    <div class="mb-3">
      <label for="correo">Repite Contrase単a:</label>
      <input
        type="password"
        class="form-control"
        required
        [appPasswordvalidator]="regiUser.password"
        [(ngModel)]="password2"
        #passwordModel2="ngModel"
        [ngClass]="validClasses(passwordModel2, 'is-valid', 'is-invalid')"
        id="password2"
        name="password2"
        placeholder="Password"
      />
      <div class="invalid-feedback">Contrase単a no coincide</div>
      <div class="valid-feedback">Password correctos</div>
    </div>

    <img src="" alt="" id="imgPreview" class="img-thumbnail d-none" />
    <p class="text-danger" id="errorInfo"></p>
    <a class="btn btn-secondary" [routerLink]="['/auth/login']" role="button"
      >Volver</a
    >
    <button
      type="submit"
      [disabled]="RegiForm.invalid"
      class="btn btn-primary ms-2"
    >
      Crear Cuenta
    </button>
  </form>
</div>
